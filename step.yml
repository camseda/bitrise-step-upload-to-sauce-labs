#
# A couple of useful guides & docs:
#
# - Main Bitrise CLI docs: https://github.com/bitrise-io/bitrise/tree/master/_docs
# - Step Development Guideline: https://github.com/bitrise-io/bitrise/blob/master/_docs/step-development-guideline.md
# - Bitrise.yml format spec: https://github.com/bitrise-io/bitrise/blob/master/_docs/bitrise-yml-format-spec.md
# - Bitrise docs: http://devcenter.bitrise.io/
# - Bitrise CLI guides: http://devcenter.bitrise.io/bitrise-cli/

title: |-
  Upload to Sauce Labs
summary: |
  Upload APK/AAB/IPA artifacts to Sauce Labs.
description: |
  Upload your build files to Sauce Labs for remote device testing.
  Needs an APK, AAB, or IPA file, Sauce Labs username, access key, and custom file name.

  Required fields are:
  - upload_path
  - sauce_username
  - sauce_access_key
  - sauce_app_name
website: https://github.com/camseda/bitrise-step-upload-to-sauce-labs
source_code_url: https://github.com/camseda/bitrise-step-upload-to-sauce-labs
support_url: https://github.com/camseda/bitrise-step-upload-to-sauce-labs/issues

project_type_tags:
  - ios
  - android

type_tags:
  - deploy

is_always_run: false
is_skippable: false
run_if: ""

deps:
  brew:
    - name: git
    - name: wget
    - name: jq
  apt_get:
    - name: git
    - name: wget
    - name: jq

toolkit:
  bash:
    entry_file: step.sh

inputs:
  - upload_path:
    opts:
      title: The absolute APK, AAB, or IPA path
      summary: Can be used to overwrite the automatically generated filepath.
      description: |
        Generated automatically based on the Sauce Lab application's name extension set below. If you'd like to overwrite the generated file path (usually `$BITRISE_APK_PATH`, `$BITRISE_AAB_PATH`,
        or `$BITRISE_IPA_PATH`), you can set a path here.
      is_required: false
  - sauce_username: $SAUCE_USERNAME
    opts:
      title: Sauce Labs username
      summary: Your Sauce Labs username
      description: The username given to your Sauce Labs account.
      is_required: true
      is_sensitive: true
  - sauce_access_key: $SAUCE_ACCESS_KEY
    opts:
      title: Sauce Labs Access Key
      summary: Your Sauce Labs Access Key
      description: The secure key used to access your Sauce Labs account.
      is_required: true
      is_sensitive: true
  - sauce_app_name: $SAUCE_APP_NAME
    opts:
      title: Sauce Labs App Name
      summary: Your Sauce Labs application name and extension.
      description: |
        This is translated to the File Name in Sauce Labs.
        Can be used to activate a specific app with the `filename` flag in your Capabilities
        rather than using the File ID automatically generated on upload - `storage:filename=<fileName>.<ext>`.
        A JavaScript example would be: `caps['app'] = 'storage:filename=<file-name>.apk';`
      is_required: true